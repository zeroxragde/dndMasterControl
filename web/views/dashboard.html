<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Tablero del DM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <script src="js/base.js"></script>
    <script src="js/Clases/modal.js"></script>
    <script src="js/Clases/tab.js"></script>
    <script src="js/Clases/listview.js"></script>
    <script src="js/dashboard.js"></script>

  </head>
  <body>
    <h1 id="tituloDashboard">Tablero del DM</h1>
    <div id="web-container" class="web-container">
    
      <nav class="web-nav" role="tablist">

        <button class="web-tab-button active" role="tab" aria-controls="web-tab-ambiente" aria-selected="true">üéµ Ambientaci√≥n musical</button>
        <button class="web-tab-button" role="tab" aria-controls="web-tab-creaturas" aria-selected="false">üßô Creaturas </button>


      </nav>

      <main class="web-content">

        <div id="web-tab-ambiente" class="web-tab-content active" role="tabpanel">
          <div class="fila-contenido">
            <!-- üéµ Reproductor -->
            <div class="bloque bloque-reproductor">
              <div class="player compacto">
                <div class="player-controls">
                  <button id="prev" title="Anterior">&#9664;&#9664;</button>
                  <button id="play" title="Play/Pausa">&#9654;</button>
                  <button id="next" title="Siguiente">&#9654;&#9654;</button>
                  <div class="loop-toggle-container" title="Repetir canci√≥n">
                    <label class="switch-loop">
                      <input type="checkbox" id="loopToggle">
                      <span class="slider"></span>
                    </label>
                    <span class="loop-label">üîÅ Loop</span>
                    <input type="range" id="volume" min="0" max="100" value="50" title="Volumen">
                  </div>
                </div>
                <div class="player-info">
                  <span>üéµ <span id="nombreCancion">Sin canci√≥n</span></span>

                  <div class="player-info-buttons">
                    <button id="btnLista" class="btn">üé∂ Lista</button>
                    <button id="abrirSubida" class="btn">üì§ Subir canci√≥n</button>
                  </div>
                </div>
              </div>
            </div>


            <!-- üéµ Reproductor Sonidos -->
            <div class="bloque bloque-reproductor">
              <div class="player compacto">
                <div class="player-controls">
                  <button id="prev" title="Anterior">&#9664;&#9664;</button>
                  <button id="play" title="Play/Pausa">&#9654;</button>
                  <button id="next" title="Siguiente">&#9654;&#9654;</button>
                  <div class="loop-toggle-container" title="">
                    <input type="range" id="volume" min="0" max="100" value="50" title="Volumen">
                  </div>
                </div>
                <div class="player-info">
                  <span>üéµ <span id="nombreCancion">Sin sonido</span></span>

                  <div class="player-info-buttons">
                    <button id="btnLista" class="btn">üé∂ Lista</button>
                    <button id="abrirSubida" class="btn">üì§ Subir sonido</button>
                  </div>
                </div>
              </div>
            </div>


            <!-- Modales -->
            <div id="modalSubida" class="modal-panel" style="display: none;">
              <div class="modal-header">
                <h3>üì§ Subir canciones</h3>
                <button id="cerrarSubida" class="modal-close-btn">‚úñ</button>
              </div>

              <p>Selecciona la categor√≠a y los archivos de audio que quieres a√±adir.</p>

              <label for="categoriaSubida">Categor√≠a:</label>
              <select id="categoriaSubida" name="categoriaSubida" style="width: 100%; margin-top: 5px; margin-bottom: 15px;">
                <option value="">Sin categor√≠a</option>
                </select>
              
              <input type="file" id="inputCanciones" multiple accept=".mp3,.wav,.ogg" class="btn" style="width: 100%; box-sizing: border-box;">

              <div style="margin-top: 20px; display: flex; justify-content: flex-end;">
                  <button id="subirArchivos" class="btn">üìÅ Subir Archivos</button>
              </div>
            </div>

            <div id="listaPanel" class="modal-panel">
              <div class="modal-header">
                <h3>üéµ Lista de canciones</h3>
                <button class="modal-close-btn">‚úñ</button>
              </div>
            
              <input
                type="text"
                id="buscadorCanciones"
                placeholder="Buscar canci√≥n..."
                onkeyup="filtrarCanciones()"
              />
            
              <select id="categoriaCanciones">
                <option value="">Todas las categor√≠as</option>
                <!-- Se cargar√°n din√°micamente -->
              </select>
            
              <ul id="listaCanciones">
                <!-- Se llenar√° din√°micamente -->
                <li>Intro - Aventura en Arleneth</li>
                <li>Batalla - Tambores de guerra</li>
                <li>Exploraci√≥n - Ecos del bosque</li>
              </ul>
            </div>
          </div>
        </div>

        <div id="web-tab-creaturas" class="web-tab-content" role="tabpanel">
            <div id="creature-list-container" class="list-manager-container">
                <div class="list-view">
                  <div class="table-container">
                      <table class="data-table">
                        <thead>
                          <tr>
                            <th>Nombre</th>
                            <th>CR</th>
                          </tr>
                        </thead>
                        <tbody id="listaCriaturasBody">
                          </tbody>
                      </table>
                  </div>
                    
                    <div class="list-filters">
                      <select>
                        <option>Todas las criaturas</option>
                      </select>
                    </div>
                </div>
            
                <div class="list-actions">
                  <button class="btn" title="Eliminar"><i class="fa-solid fa-trash"></i></button>
                  <button class="btn" title="Editar"><i class="fa-solid fa-pencil"></i></button>
                  <button class="btn" title="Importar/Exportar"><i class="fa-solid fa-file-import"></i></button>
                  <button class="btn" title="Refrescar"><i class="fa-solid fa-arrows-rotate"></i></button>
                </div>
            
            </div>
            
            <div class="footer-actions">
              <button id="btnOpenEditor" class="btn">Nueva Creatura</button>
            </div>

            <!-- Modales -->
            <div id="modalEditor" class="modal-panel" style="display: none;">
              <div class="modal-header">
                <h3 id="editor-title-display"></h3>
                <button id="cerrarEditor" class="modal-close-btn">‚úñ</button>
              </div>
              <div class="modal-content editor-scroll-content">

                  <div id="creature-editor-container" class="editor-container">
                      
                      <nav class="editor-nav" role="tablist">
                        
                        <button class="editor-tab-button active" role="tab" aria-controls="editor-tab-datos1" aria-selected="true">Datos 1</button>
                        <button class="editor-tab-button" role="tab" aria-controls="editor-tab-datos2" aria-selected="false">Datos 2</button>
                        <button class="editor-tab-button" role="tab" aria-controls="editor-tab-datos3" aria-selected="false">Datos 3</button>
                        <button class="editor-tab-button" role="tab" aria-controls="editor-tab-acciones" aria-selected="false">Acciones</button>
                        
                        <div class="nav-spacer"></div>
                        <button class="btn">GUARDAR</button>
                        <button class="btn editor-close-btn">Salir</button>
                      </nav>

                      <main class="editor-content">
                        
                   

                        <div id="editor-tab-datos1" class="editor-tab-content active" role="tabpanel">
                              <div class="form-row">
                                  <div class="form-group" style="flex: 3 1 0%;">
                                      <label for="editor-nombre">NOMBRE</label>
                                      <input type="text" id="editor-nombre" placeholder="Nombre de la criatura...">
                                  </div>
                                  <div class="form-group" style="flex: 1 1 0%;">
                                      <label for="editor-tama√±o">TAMA√ëO</label>
                                      <select id="editor-tama√±o"></select>
                                  </div>
                                  <div class="form-group" style="flex: 1 1 0%;">
                                      <label for="editor-tipo">TIPO</label>
                                      <select id="editor-tipo"></select>
                                  </div>
                              </div>

                              <div class="form-row">
                                  <div class="form-group">
                                      <label for="editor-hp-dados">PUNTOS DE GOLPE</label>
                                      <div class="input-group">
                                          <input type="text" id="editor-hp-dados" placeholder="Ej: 2d8+2">
                                          <input type="text" id="editor-hp-promedio" style="width: 100px;" placeholder="promedio">
                                      </div>
                                  </div>
                                  <div class="form-group">
                                      <label for="editor-ac">CLASE DE ARMADURA</label>
                                      <div class="input-group">
                                          <input type="text" id="editor-ac" style="width: 80px;" placeholder="CA">
                                          <select id="editor-armadura" class="flex-grow"></select>
                                          <div class="checkbox-container">
                                              <input type="checkbox" id="editor-escudo">
                                              <label for="editor-escudo">Escudo</label>
                                          </div>
                                      </div>
                                  </div>
                              </div>

                              <div class="form-row stat-row">
                                  <div class="stat-group">
                                      <label for="input-velocidad">VELOCIDAD</label>
                                      <input type="text" id="input-velocidad" class="numeric-input" placeholder="ft.">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-vel-cavado">V. CAVADO</label>
                                      <input type="text" id="input-vel-cavado" class="numeric-input" placeholder="ft.">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-vel-escalado">V. ESCALADO</label>
                                      <input type="text" id="input-vel-escalado" class="numeric-input" placeholder="ft.">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-vel-vuelo">V. VUELO</label>
                                      <input type="text" id="input-vel-vuelo" class="numeric-input" placeholder="ft.">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-vel-nado">V. NADO</label>
                                      <input type="text" id="input-vel-nado" class="numeric-input" placeholder="ft.">
                                  </div>
                              </div>

                              <div class="form-row stat-row">
                                  <div class="stat-group">
                                      <label for="input-fuerza">FUERZA</label>
                                      <input type="text" id="input-fuerza" class="numeric-input" value="10">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-destreza">DESTREZA</label>
                                      <input type="text" id="input-destreza" class="numeric-input" value="10">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-con">CON</label>
                                      <input type="text" id="input-con" class="numeric-input" value="10">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-int">INTELIGENCIA</label>
                                      <input type="text" id="input-int" class="numeric-input" value="10">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-sab">SABIDUR√çA</label>
                                      <input type="text" id="input-sab" class="numeric-input" value="10">
                                  </div>
                                  <div class="stat-group">
                                      <label for="input-car">CARISMA</label>
                                      <input type="text" id="input-car" class="numeric-input" value="10">
                                  </div>
                              </div>

                              <div class="form-row">
                                  <div class="control-group">
                                      <label>TIRADAS DE SALVACI√ìN</label>
                                      <select id="select-salvaciones"></select>
                                      <button class="btn" data-target-panel="panel-salvaciones" data-source-select="select-salvaciones" data-type="competente">A√ëADIR</button>
                                      <div id="panel-salvaciones" class="display-panel"></div>
                                  </div>
                                  <div class="control-group">
                                      <label>HABILIDADES</label>
                                      <select id="select-habilidades"></select>
                                      <div class="input-group">
                                          <button class="btn" data-target-panel="panel-habilidades" data-source-select="select-habilidades" data-type="competente">COMPETENTE</button>
                                          <button class="btn" data-target-panel="panel-habilidades" data-source-select="select-habilidades" data-type="experto">EXPERTO</button>
                                      </div>
                                      <div id="panel-habilidades" class="display-panel"></div>
                                  </div>
                              </div>

                              <div class="form-row">
                                  <div class="control-group">
                                      <label>RESIST., INMUN., VULNER. (DA√ëO)</label>
                                      <select id="select-tipos-da√±o"></select>
                                      <div class="input-group">
                                          <button class="btn" data-target-panel="panel-resistencias" data-source-select="select-tipos-da√±o" data-type="resistencia">RESISTENCIA</button>
                                          <button class="btn" data-target-panel="panel-inmunidades" data-source-select="select-tipos-da√±o" data-type="inmune">INMUNE</button>
                                          <button class="btn" data-target-panel="panel-vulnerabilidades" data-source-select="select-tipos-da√±o" data-type="vulnerable">VULNERABLE</button>
                                      </div>
                                  </div>
                                  <div class="control-group">
                                      <label>INMUNIDAD A CONDICI√ìN</label>
                                      <select id="select-inmunidad-condicion"></select>
                                      <button class="btn" data-target-panel="panel-inmunidad-condicion" data-source-select="select-inmunidad-condicion" data-type="inmune">A√ëADIR</button>
                                  </div>
                              </div>
                        </div>


                        <div id="editor-tab-datos2" class="editor-tab-content" role="tabpanel">

                          

   <div class="form-row">
        <div class="control-group" style="flex-basis: 48%;">
            <label>VULNER., RESIST., INMUNE (DA√ëO)</label>
            <select id="select-tipos-da√±o"></select>
            <div class="input-group">
                <button class="btn" data-target-panel="panel-da√±o" data-source-select="select-tipos-da√±o" data-type="vulnerable">VULNERABLE</button>
                <button class="btn" data-target-panel="panel-da√±o" data-source-select="select-tipos-da√±o" data-type="resistente">RESISTENTE</button>
                <button class="btn" data-target-panel="panel-da√±o" data-source-select="select-tipos-da√±o" data-type="inmune">INMUNE</button>
            </div>
            <div id="panel-da√±o" class="display-panel"></div>
        </div>
        <div class="control-group" style="flex-basis: 48%;">
            <label>IDIOMAS</label>
            <select id="select-idiomas"></select>
            <div class="input-group">
                <button class="btn" data-target-panel="panel-idiomas" data-source-select="select-idiomas" data-type="habla">HABLA</button>
                <button class="btn" data-target-panel="panel-idiomas" data-source-select="select-idiomas" data-type="entiende">ENTIENDE</button>
                <input type="text" id="input-telepatia" class="numeric-input" placeholder="Telepat√≠a (pies)">
            </div>
            <div id="panel-idiomas" class="display-panel"></div>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group sense-group">
            <label>Vista ciega</label>
            <input type="text" id="sentido-vista-ciega" class="numeric-input" value="0">
            <span>Pies</span>
            <div class="checkbox-container">
                <input type="checkbox" id="check-ciego-mas-alla">
                <label for="check-ciego-mas-alla">Ciego m√°s all√° de este radio</label>
            </div>
        </div>
        <div class="form-group sense-group">
            <label>Vision Nocturna</label>
            <input type="text" id="sentido-vision-nocturna" value="0">
            <span>Pies</span>
        </div>
        <div class="form-group sense-group">
            <label>Sentido S√≠smico</label>
            <input type="text" id="sentido-sismico" value="0">
            <span>Pies</span>
        </div>
        <div class="form-group sense-group">
            <label>Vision Verdadera</label>
            <input type="text" id="sentido-vision-verdadera" value="0">
            <span>Pies</span>
        </div>
    </div>

    <div class="form-row">
        <div class="form-column" style="width: 25%;">
            <div class="form-group">
                <label for="editor-cr-tab2">VALOR DE DESAF√çO (CR)</label>
                <select id="editor-cr-tab2"></select>
                <span id="bonificacion-cr" style="font-size: 12px; color: #aaa; margin-top: 5px;">(Bonificaci√≥n de competencia: +2)</span>
            </div>
             <div class="cr-xp-group">
                <div class="form-group">
                    <label>CR</label><input type="text">
                </div>
                <div class="form-group">
                    <label>XP</label><input type="text">
                </div>
            </div>
        </div>
        <div class="form-column" style="width: 50%;">
            <div class="form-group">
                <label for="editor-notas">NOTAS</label>
                <textarea id="editor-notas"></textarea>
            </div>
        </div>
        <div class="form-column" style="width: 25%;">
            <div class="form-group">
                <label>IMAGEN</label>
                <div class="image-uploader">
                    <img id="preview-imagen-criatura" src="" alt="Vista previa" style="display:none;">
                    <input type="file" id="input-imagen-criatura" accept="image/*" style="display:none;">
                    <button id="btn-subir-foto" class="btn">Subir Foto</button>
                </div>
            </div>
        </div>
    </div>



                        </div>

                        <div id="editor-tab-datos3" class="editor-tab-content" role="tabpanel">
                          <h2>Datos 3 - Pr√≥ximamente...</h2>
                        </div>

                        <div id="editor-tab-acciones" class="editor-tab-content" role="tabpanel">
                          <h2>Acciones - Pr√≥ximamente...</h2>
                        </div>

                      </main>
                  </div>

              </div>
            </div>
        </div>

      </main>
  </div>
  </body>
</html>
